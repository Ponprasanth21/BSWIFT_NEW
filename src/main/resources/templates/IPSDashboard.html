<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" th:fragment="summary">
<head>

<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<!-- <link rel="stylesheet" type="text/css"
	href="/webjars/font-awesome/5.9.0/css/all.min.css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}"> -->
<!-- <link rel="stylesheet" type="text/css"
	href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}"> -->
<!-- <link rel="stylesheet" type="text/css"
	href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}"> -->


<!-- <script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
	th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script> -->

<script src="/webjars/jquery/3.4.1/jquery.min.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
<!-- <script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
	th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script> -->

<!-- <script src="webjars/chartjs/2.8.0/Chart.min.js"
	th:src="@{webjars/chartjs/2.8.0/Chart.min.js}"></script>

<link rel="stylesheet" type="text/css"
	href="webjars/chartjs/2.8.0/Chart.min.css"
	th:href="@{webjars/chartjs/2.8.0/Chart.min.css}">
<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">



<script src="./js/bootstrap411.js"></script> -->
<style>
body {
	background-color: lightgrey;
}

.h2, h2 {
	font-size: 2rem;
	background-color: #555;
	color: white;
}

.card-box {
	background-color: #d9dbdc;
	background-clip: border-box;
	padding: 1.1rem;
	margin-bottom: 24px;
	border-radius: .25rem;
}

button {
	background-color: #616c77;
	color: white;
	padding: 16px 20px;
	border: none;
	cursor: pointer;
	opacity: 0.8;
	bottom: 23px;
	right: 28px;
	width: 150px;
}

.pagebut {
	margin-top: 1%;
	/*  width: 58%;  */
	padding: 1% 1%;
	background-color: #2e455d;
	color: white;
}



select {
	width: 150px;
	margin: 10px;
}

td {
	background-color: #f8f7ff;
}

select:focus {
	min-width: 150px;
	width: auto;
}

#hidden_div {
	display: none;
}

table th {
	color: white;
	background-color: #2e455deb;
}

.container-manager {
	width: 83.5%;
	padding-right: 15px;
	padding-left: 15px;
	margin-right: auto;
	margin-left: 17.3%;
	margin-top: 80px;
}

.content-page {
    margin-left: 55px;
    overflow: hidden;
    padding: 0 15px 65px 15px;
    min-height: 80vh;
    margin-top: 101px;
    }
.glass_marphisom{    
background: rgba(255, 255, 255, 1);
border-radius: 16px;
box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
backdrop-filter: blur(20px);
-webkit-backdrop-filter: blur(20px);
border: 1px solid rgba(255, 255, 255, 1);
    }


	/* ===== Modal Width & Position ===== */
.modal-dialog {
    max-width: 90%;           /* Desktop width */
    width: 90%;
}

@media (max-width: 768px) {
    .modal-dialog {
        max-width: 100%;
        margin: 10px;
    }
}

/* ===== Modal Content ===== */
.modal-content {
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
}


.modal-header .close {
    color: #fff;
    opacity: 1;
}

/* ===== Modal Body ===== */
.modal-body {
    max-height: 70vh;          /* Height control */
    overflow-y: auto;          /* Scroll if content exceeds */
    padding: 20px;
    background-color: #f8f9fa;
}

/* ===== Table Styling ===== */
.modal-body table {
    width: 100%;
    border-collapse: collapse;
    background-color: #fff;
    font-size: 14px;
}

/* Table Head */
.modal-body thead {
    background-color: #007bff;
    color: #fff;
}

.modal-body th,
.modal-body td {
    padding: 10px;
    border: 1px solid #dee2e6;
    text-align: left;
    vertical-align: top;
}

/* Zebra Striping */
.modal-body tbody tr:nth-child(even) {
    background-color: #f2f2f2;
}

/* Hover Effect */
.modal-body tbody tr:hover {
    background-color: #e9f5ff;
}

/* Long Email Body Handling */
.modal-body td:nth-child(4) {
    max-width: 400px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ===== Modal Footer ===== */
.modal-footer {
	margin: auto;
    background-color: #f1f1f1;
    padding: 10px 20px;
}

</style>
</head>
<script th:inline="javascript">
	/*<![CDATA[*/
		
		

	/*<![CDATA[*/
</script>

<script>
$(document).ready(function() {

$("#modal-buttom").trigger("click");
  $(window).keydown(function(event){
	 //alert($('#alert').hasClass('show'));
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
});
</script>


<script type="text/javascript">
	
</script>

<script th:inline="javascript">
	/*<![CDATA[*/
		
		

	$(function() {
		
		
		var completed = /*[[${completed}]]*/0;
		var uncompleted = /*[[${uncompleted}]]*/0;

		var ctxL = document.getElementById("pieChart").getContext('2d');
		var myLineChart = new Chart(ctxL, {
			type : 'pie',
			data : {
				labels : [ "Completed", "Un Completed" ],
				datasets : [ {
					label : "My First dataset",
					data : [ 30, 40 ],
					backgroundColor : [ 'rgba(102,153,51,1)',
							'rgba(105, 0, 132, .2)' ],
					borderColor : [ 'rgba(102,153,51,1)',
							'rgba(200, 99, 132, .7)' ],
					borderWidth : 3
				} ]
			},
			options : {
				responsive : true
			}
		});

	});

	$(document).ready(function() {
		


		//var tot = /*[[${Mttomxtot}]]*/0;
		var mtsucc = /*[[${Mttomxsuccess}]]*/0;
		var mtfail = /*[[${MttomxFail}]]*/0;
		
		var mxsucc = /*[[${Mxtomxsuccess}]]*/0;
		var mxfail = /*[[${MxtomxFail}]]*/0;
		
		var MCTranF = /*[[${MCTranF}]]*/0;
		var INCTranF = /*[[${INCTranF}]]*/0;
		var RTPTranF = /*[[${RTPTranF}]]*/0;
		
		var MCTranIP = /*[[${MCTranIP}]]*/0;
		var INCTranIP = /*[[${INCTranIP}]]*/0;
		var RTPTranIP = /*[[${RTPTranIP}]]*/0;
		
		var MCTranR = /*[[${MCTranR}]]*/0;
		var INCTranR = /*[[${INCTranR}]]*/0;
		var RTPTranR = /*[[${RTPTranR}]]*/0;
		
	google.charts.load("current", { packages: ["corechart"] });
	google.charts.setOnLoadCallback(drawCharts);

	function drawCharts() {
		drawMtToMxChart();
		drawMxToMtChart();
	}

	 function drawMtToMxChart() {
    let total = mtsucc + mtfail;
    let success_percentage = total ? (mtsucc / total) * 100 : 0;
    let fail_percentage = total ? (mtfail / total) * 100 : 0;

    var data = google.visualization.arrayToDataTable([
      ["Status", "Percentage"],
      ["Success", success_percentage],
      ["Failure", fail_percentage]
    ]);

    var options = {
      title: "MT to MX Conversion",
      is3D: true,
	  colors: ["skyblue", "orange"]
    };
	

    var chart = new google.visualization.PieChart(
      document.getElementById("mt_to_mx_chart")
    );
    chart.draw(data, options);
  }

  function drawMxToMtChart() {
    let total = mxsucc + mxfail;
    let success_percentage = total ? (mxsucc / total) * 100 : 0;
    let fail_percentage = total ? (mxfail / total) * 100 : 0;

    var data = google.visualization.arrayToDataTable([
      ["Status", "Percentage"],
      ["Success", success_percentage],
      ["Failure", fail_percentage]
    ]);

    var options = {
      title: "MX to MT Conversion",
      is3D: true,
	  colors: ["skyblue", "orange"]
    };

    var chart = new google.visualization.PieChart(
      document.getElementById("mx_to_mt_chart")
    );
    chart.draw(data, options);
  }
  
	
		// var o, e = function() {
		// 	$("#Mconnect").sparkline([  mtsucc, mtfail ], {
		// 		type : "pie",
		// 		width : "315",
		// 		height : "315",
		// 		sliceColors : [ "lch(54.33% 53.47 134.55)", "#f58520"]

		// 	}), $("#INC1").sparkline([ mxsucc, mxfail ], {
		// 		type : "pie",
		// 		width : "315",
		// 		height : "315",
		// 		sliceColors : [ "lch(54.33% 53.47 134.55)", "#f58520" ]

		// 	})
		// };
		e(), $(window).resize(function(i) {
			clearTimeout(o), o = setTimeout(function() {
				e()
			}, 300)
		})
	});
	/*]]>*/
</script>


<body>
	<div th:insert="MMenupage :: header"></div>

	<div class="container-manager">


		<!-- ============================================================== -->
		<!-- Start Page Content here -->
		<!-- ============================================================== -->

		<div class="content-page">
			<div class="content">

				<!-- Start Content-->
				<div class="container-fluid">


					<!-- end page title -->

					<div class="row">


						<div class="col-xl-6 col-md-9">
							<div class="card-box">
								<div class="float-left" dir="ltr">
									<div style="display: inline; width: 70px; height: 70px;">
										<canvas width="70" height="70"></canvas>
										<input data-plugin="knob" data-width="70" data-height="70"
											data-fgcolor="#0e0c0c" data-bgcolor="rgba(112, 129, 146,0.2)"
											th:value="${Mttomxsuccess}" data-skin="tron"
											data-angleoffset="0" data-readonly="true"
											data-thickness=".15" readonly="readonly"
											style="width: 39px; height: 23px; position: absolute; vertical-align: middle; margin-top: 23px; margin-left: -54px; border: 0px; background: none; font: bold 14px Arial; text-align: center; color: rgb(0, 177, 157); padding: 0px; -webkit-appearance: none;">
									</div>
								</div>
								<div class="text-right">
									<h3 class="mb-1" th:text="${Mttomxsuccess}"></h3>
									<p class="text-muted mb-1">MT to MX Conversion</p>
								</div>
							</div>
						</div>
						<!-- end col -->

						<div class="col-xl-6 col-md-9">
							<div class="card-box">
								<div class="float-left" dir="ltr">
									<div style="display: inline; width: 70px; height: 70px;">
										<canvas width="70" height="70"></canvas>
										<input data-plugin="knob" data-width="70" data-height="70"
											data-fgcolor="#0e0c0c" data-bgcolor="rgba(112, 129, 146,0.2)"
											th:value="${Mxtomxsuccess}" data-skin="tron"
											data-angleoffset="0" data-readonly="true"
											data-thickness=".15" readonly="readonly"
											style="width: 39px; height: 23px; position: absolute; vertical-align: middle; margin-top: 23px; margin-left: -54px; border: 0px; background: none; font: bold 14px Arial; text-align: center; color: rgb(0, 177, 157); padding: 0px; -webkit-appearance: none;">
									</div>
								</div>
								<div class="text-right">
									<h3 class="mb-1" th:text="${Mxtomxsuccess}"></h3>
									<p class="text-muted mb-1">MX to MT Conversion</p>
								</div>
							</div>
						</div>
						<!-- end col -->

						
						

					</div>
					<!-- end row -->

					<div class="row">


						<div class="col-xl-6">
							<div class="card-box">

								<button type="button" id="modal-buttom" style="display: none;" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
  Launch demo modal
</button>

								<h3 class="header-title" style="font-size: 1rem;">MT to MX Conversion</h3>

								<div class="mt-3 text-center">
										 <div class="phppot-container">
											<div id="mt_to_mx_chart" style="width: 700px; height: 500px;" class="glass_marphisom" ></div>
										</div>

									<!-- <div id="Mconnect" class="text-center mt-3">
										<canvas width="210" height="210"
											style="display: inline-block; width: 315px; height: 315px; vertical-align: top;"></canvas>
									</div> -->
	
									<div class="row mt-3">
										<div class="col-4">
											<p class="text-muted font-15 mb-1 text-truncate">Success</p>
											<h4 style="background: skyblue; color:black;" th:text="${Mttomxsuccess}"></h4>
										</div>
										<div class="col-4">
											<p class="text-muted font-15 mb-1 text-truncate">Failure</p>
											<h4 style="background:#f58520; color:black;" th:text="${MttomxFail}"></h4>
										</div>
										<!-- <div class="col-4">
											<p class="text-muted font-15 mb-1 text-truncate">In
												Progress</p>
											<h4 style="background: #8a929a; color:#e6e7e7;" th:text="${MttomxFail}"></h4>
										</div> -->
										<!-- <div class="col-3">
											<p class="text-muted font-15 mb-1 text-truncate">R-Failure</p>
											<h4 style="background: #f7bb86; color:#e6e7e7;" th:text="${MCTranR}"></h4>
										</div> -->
									</div>

								</div>
							</div>
						</div>


						<div class="col-xl-6">
							<div class="card-box">


								<h3 class="header-title"  style="font-size: 1rem;">MX to MT Conversion</h3>

								<div class="mt-3 text-center">


									<div id="INC1" class="text-center mt-3">
										<div class="phppot-container">
											<div id="mx_to_mt_chart" style="width: 700px; height: 500px;" class="glass_marphisom" ></div>
										</div>
										<!-- <canvas width="210" height="210"
											style="display: inline-block; width: 315px; height: 315px; vertical-align: top;"></canvas> -->
									</div>

									<div class="row mt-3">
										<div class="col-4">
											<p class="text-muted font-15 mb-1 text-truncate">Success</p>
											<h4 style="background: skyblue; color:black;" th:text="${Mxtomxsuccess}"></h4>
										</div>
										<div class="col-4">
											<p class="text-muted font-15 mb-1 text-truncate">Failure</p>
											<h4 style="background: #f58520; color:black;" th:text="${MxtomxFail}"></h4>
										</div>
										<!-- <div class="col-4">
											<p class="text-muted font-15 mb-1 text-truncate">In
												Progress</p>
											<h4 style="background: #8a929a; color:#e6e7e7;" th:text="${INCTranIP}"></h4>
										</div> -->
										<!-- <div class="col-3">
											<p class="text-muted font-15 mb-1 text-truncate">R-Failure</p>
											<h4 style="background: #f7bb86; color:#e6e7e7;" th:text="${INCTranR}"></h4>
										</div> -->
									</div>

								</div>
							</div>
						</div>


						
					<!-- end row -->


				</div>
				<!-- end col -->
			</div>
			<!-- end row -->

		</div>
		<!-- container -->

	</div>
	<!-- content -->
<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content" style="width: fit-content;">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Unread Mails</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="width:fit-content;margin: auto;" >
        <table border="1" style="width:100%; border-collapse: collapse;">
			<thead>
				<tr>
					<th style="font-size: medium;" >S.No</th>
					<th style="font-size: medium;" >From</th>
					<th style="font-size: medium;" >Subject</th>
					<!-- <th style="font-size: medium;" >Body</th> -->
					<th style="white-space: nowrap;">Received Time</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="mail, stat : ${mailList}">
					<td style="font-size: medium;" th:text="${stat.count}"></td>
					<td style="font-size: medium;white-space: nowrap;" th:text="${mail.from}"></td>
					<td style="font-size: medium;white-space: nowrap;" th:text="${mail.subject}"></td>
					<!-- <td style="font-size: medium;width: fit-content;white-space: nowrap;" th:text="${mail.body}"></td> -->
					<td style="font-size: medium;white-space: nowrap;" th:text="${#temporals.format(mail.recivedtime, 'dd-MM-yyyy HH:mm:ss')}"></td>
				</tr>
				<!-- When no mails -->
				<tr th:if="${#lists.isEmpty(mailList)}">
					<td colspan="5" style="font-size: medium;text-align:center; color:red;">
						No Unread mails found
					</td>
				</tr>
			</tbody>
		</table>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


	<!-- ============================================================== -->
	<!-- End Page content -->
	<!-- ============================================================== -->



</body>
</html>